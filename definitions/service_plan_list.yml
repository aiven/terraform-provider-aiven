# yaml-language-server: $schema=.schema.yml
location: internal/plugin/service/planlist
datasource:
  description: >
    A list of service plans for a given project and service type.
idAttribute:
  fields:
    - project
    - service_type
remove:
  - service_plans/backup_config
clientHandler: project
operations:
  - id: ProjectServicePlanList
    type: read
    resultToKey: service_plans
schema:
  service_plans:
    type: arrayOrdered
    items:
      properties:
        regions:
          # The spec doesn't define the "regions" properties:
          # https://api.aiven.io/doc/#tag/Project/operation/ProjectServicePlanList
          type: object
          additionalProperties:
            type: object
            description: Plan details for the given service type in this particular cloud region
            properties:
              disk_space_mb:
                type: integer
                description: Combined amount of service disk space of all service nodes in megabytes
              disk_space_step_mb:
                type: integer
                description: Disk space change step size
              disk_space_cap_mb:
                type: integer
                description: Maximum amount of disk space possible for the plan in the given region
              disk_space_gb_price_usd:
                type: string
                description: Hourly additional disk space price per GiB in this region
              object_storage_gb_price_usd:
                type: string
                description: Hourly object storage price per GiB in this region
              price_usd:
                type: string
                description: Hourly service price in this region
              node_cpu_count:
                type: integer
                description: Number of CPU cores on each service node
              node_memory_mb:
                type: integer
                description: Amount of memory on each service node in megabytes
