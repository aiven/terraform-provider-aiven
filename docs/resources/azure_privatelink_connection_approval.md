---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "aiven_azure_privatelink_connection_approval Resource - terraform-provider-aiven"
subcategory: ""
description: |-
  Approves an Azure Private Link connection to an Aiven service with an associated endpoint IP.
---

# aiven_azure_privatelink_connection_approval (Resource)

Approves an Azure Private Link connection to an Aiven service with an associated endpoint IP.

## Example Usage

```terraform
resource "aiven_static_ip" "static_ips" {
  count      = 2
  project    = var.project_id
  cloud_name = var.region
}

resource "aiven_pg" "default" {
  service_name   = "postgres"
  project        = var.aiven_project_id
  project_vpc_id = var.aiven_project_vpc_id
  cloud_name     = var.region
  plan           = var.plan
  static_ips     = [for sip in aiven_static_ip.static_ips : sip.static_ip_address_id]

  pg_user_config {
    pg_version = 13
    static_ips = true
    privatelink_access {
      pg        = true
      pgbouncer = true
    }
  }

}

resource "aiven_azure_privatelink" "privatelink" {
  project      = var.aiven_project_id
  service_name = aiven_pg.default.name
  user_subscription_ids = [
    var.azure_subscription_id
  ]
}

resource "azurerm_private_endpoint" "endpoint" {
  name                = "postgres-endpoint"
  location            = var.region
  resource_group_name = var.azure_resource_group.name
  subnet_id           = var.azure_subnet_id
  private_service_connection {
    name                           = aiven_pg.default.name
    private_connection_resource_id = aiven_azure_privatelink.privatelink.azure_service_id
    is_manual_connection           = true
    request_message                = aiven_pg.default.name
  }
  depends_on = [
    aiven_azure_privatelink.privatelink,
  ]
}

resource "aiven_azure_privatelink_connection_approval" "approval" {
  project             = var.aiven_project_id
  service_name        = aiven_pg.default.service_name
  endpoint_ip_address = azurerm_private_endpoint.endpoint.private_service_connection[0].private_ip_address
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `project` (String) The name of the project this resource belongs to. To set up proper dependencies please refer to this variable as a reference. Changing this property forces recreation of the resource.
- `service_name` (String) The name of the service that this resource belongs to. To set up proper dependencies please refer to this variable as a reference. Changing this property forces recreation of the resource.

### Optional

- `endpoint_ip_address` (String) IP address of Azure private endpoint.
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `id` (String) The ID of this resource.
- `privatelink_connection_id` (String) The ID of the Private Link connection.
- `state` (String) The state of the Private Link connection.

<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `default` (String, Deprecated) Use specific CRUD timeouts instead.
- `delete` (String)
- `read` (String)
- `update` (String)

## Import

Import is supported using the following syntax:

```shell
terraform import aiven_azure_privatelink_connection_approval.approval PROJECT/SERVICE_NAME
```
